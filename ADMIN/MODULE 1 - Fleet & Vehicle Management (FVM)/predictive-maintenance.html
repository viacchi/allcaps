<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Predictive Maintenance Forecasting Â· Logistics II</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" href="data:,">
</head>
<body class="bg-gray-100 text-gray-800">

  <main class="pt-20 px-6 max-w-7xl mx-auto">
    <!-- Page Header -->
    <div class="w-full max-w-5xl mx-auto px-6 py-6">
      <header class="mb-4 text-center"> 
        <h1 class="text-2xl font-semibold">Predictive Maintenance Forecasting</h1>
        <p class="text-gray-600 mt-1">AI-driven tool predicting when vehicles need maintenance </p>
      </header>
    </div>
  
    <!-- Summary Cards -->
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 mb-6">
      <div class="p-4 bg-white rounded-lg shadow">
        <p class="text-sm text-black-500 font-bold">High Priority Alerts</p>
        <p id="totalPriority" class="text-xl text-red-600 ">2</p>
        <p class="text-sm text-gray-500 ">Require immidiate attention</p>
      </div>
      <div class="p-4 bg-white rounded-lg shadow">
        <p class="text-sm text-black-500 font-bold">Average Health Score</p>
        <p id="averageHealth" class="text-xl text-blue-600 ">74%</p>
        <p class="text-sm text-gray-500 ">Fleet-wide average</p>
      </div>
      <div class="p-4 bg-white rounded-lg shadow">
        <p class="text-sm text-black-500 font-bold">Upcoming Maintenance</p>
        <p id="upcomingMaintenance" class="text-xl xl text-red-600">5</p>
        <p class="text-sm text-gray-500 ">Next 7 days</p>
      </div>
      <div class="p-4 bg-white rounded-lg shadow">
        <p class="text-sm text-black-500 font-bold">Total Prediction</p>
        <p id="totalPrediction" class="text-xl text-blue-600 ">5</p>
        <p class="text-sm text-gray-500 ">Active forecasts</p>
      </div>
    </div>

    <!-- Table -->
    <div class="bg-white rounded-lg shadow overflow-x-auto">
      <div class="flex justify-between p-4">
       <div class="flex items-center border rounded px-2 w-1/3 bg-white">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-5 h-5 text-gray-500">
          <path fill-rule="evenodd" d="M9.965 11.026a5 5 0 1 1 1.06-1.06l2.755 2.754a.75.75 0 1 1-1.06 1.06l-2.755-2.754ZM10.5 7a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z" clip-rule="evenodd" />
        </svg> 
        <input type="text"
         id="searchInput"
         placeholder="Search by vehicle..."     
           class="px-2 py-2 w-full text-sm outline-none">
        </div>
        <div class="flex gap-2">
          <select id="priorityFilter" class="px-3 py-2 border rounded text-sm">
            <option value="">All Priorities</option>
            <option value="High">High</option>
            <option value="Medium">Medium</option>
            <option value="Low">Low</option>
          </select>
          <select id="vehicleFilter" class="px-3 py-2 border rounded text-sm">
            <option value="">All Vehicles</option>
          </select>
        </div>
      </div>

      <table class="min-w-full text-sm">
        <thead class="bg-green-700 text-white">
          <tr>
            <th class="px-4 py-2 text-left">Vehicle</th>
            <th class="px-4 py-2 text-left">Predicted Issue</th>
            <th class="px-4 py-2 text-left">Forecast Date</th>
            <th class="px-4 py-2 text-left">Priority</th>
            <th class="px-4 py-2 text-left">Confidence</th>
            <th class="px-4 py-2 text-left">Health Score</th>
            <th class="px-4 py-2 text-left">Trend</th>
          </tr>
        </thead>
        <tbody id="forecastTable" class="divide-y divide-gray-200"></tbody>
      </table>
    </div>
  </div>  
  <div class="flex justify-center mt-4">
  <a href="health-score.html"
     class="flex items-center gap-2 px-6 py-3 bg-green-700 text-white rounded-lg hover:bg-green-800">
    <!-- Eye/Chart Icon -->
    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
            d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 
               4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
            d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
    </svg>
    See Vehicle Health Score Trends
  </a>
</div>
     <div class="flex justify-end mt-5">
        <a href="admin.html"
         class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">
        Exit
      </a>
    </div>

  </main>

  <script>
    const forecasts = [
      { vehicle: "ABC-123 Ford Transit", issue: "Brake Pad Replacement", date: "Feb 10, 2024", priority: "High", confidence: 92, health: 68, trend: "Declining" },
      { vehicle: "XYZ-456 Mercedes Sprinter", issue: "Oil Change Service", date: "Feb 20, 2024", priority: "Medium", confidence: 81, health: 75, trend: "Stable" },
      { vehicle: "DEF-789 Volvo FH16", issue: "Tire Replacement", date: "Feb 25, 2024", priority: "Medium", confidence: 85, health: 59, trend: "Declining" },
      { vehicle: "GHI-321 Isuzu NPR", issue: "Engine Diagnostics", date: "Mar 1, 2024", priority: "High", confidence: 89, health: 65, trend: "Declining" },
      { vehicle: "JKL-654 Mercedes Sprinter", issue: "Battery Replacement", date: "Mar 10, 2024", priority: "Low", confidence: 72, health: 82, trend: "Stable" }
    ];

    const tBody = document.getElementById("forecastTable");
    const vehicleFilter = document.getElementById("vehicleFilter");
    const priorityFilter = document.getElementById("priorityFilter");
    const searchInput = document.getElementById("searchInput");

    // Populate vehicle filter options
    const uniqueVehicles = [...new Set(forecasts.map(f => f.vehicle))];
    uniqueVehicles.forEach(v => {
      const opt = document.createElement("option");
      opt.value = v;
      opt.textContent = v;
      vehicleFilter.appendChild(opt);
    });

    function renderTable(data) {
      tBody.innerHTML = "";
      if (!data.length) {
        tBody.innerHTML = `<tr><td colspan="7" class="text-center p-4 text-gray-500">No forecasts found</td></tr>`;
        return;
      }
      data.forEach(f => {
        const row = document.createElement("tr");
        row.className = "hover:bg-gray-50";
        row.innerHTML = `
          <td class="p-2">${f.vehicle}</td>
          <td class="p-2">${f.issue}</td>
          <td class="p-2">${f.date}</td>
          <td class="p-2">${priorityBadge(f.priority)}</td>
          <td class="p-2">${confidenceBar(f.confidence)}%</td>
          <td class="p-2">${healthBar(f.health)}</td>
          <td class="p-2">${trendBadge(f.trend)}</td>
        `;
        tBody.appendChild(row);
      });
    }

    function priorityBadge(priority) {
      const colors = { High: "bg-red-100 text-red-700", Medium: "bg-yellow-100 text-yellow-700", Low: "bg-blue-100 text-blue-700" };
      return `<span class="px-2 py-1 rounded text-xs ${colors[priority]}">${priority}</span>`;
    }

    function confidenceBar(value) {
      return `
        <div class="flex items-center gap-2">
          <div class="w-24 h-2 bg-gray-200 rounded-full overflow-hidden">
            <div class="bg-blue-500 h-2" style="width:${value}%"></div>
        </div>
         <span class="text-xs text-gray-600">${value}%</span> 
      `;
    }

   function trendBadge(trend) {
  switch (trend) {
    case "Declining":
      return `
        <span class="flex items-center gap-1 text-red-600 font-medium">
          <!-- Down Arrow Icon -->
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
            <path fill-rule="evenodd" d="M1.22 4.22a.75.75 0 0 1 1.06 0L6 7.94l2.761-2.762a.75.75 0 0 1 1.158.12 24.9 24.9 0 0 1 2.718 5.556l.729-1.261a.75.75 0 0 1 1.299.75l-1.591 2.755a.75.75 0 0 1-1.025.275l-2.756-1.591a.75.75 0 1 1 .75-1.3l1.097.634a23.417 23.417 0 0 0-1.984-4.211L6.53 9.53a.75.75 0 0 1-1.06 0L1.22 5.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
          </svg>
          Declining
        </span>
      `;
    case "Stable":
      return `
        <span class="flex items-center gap-1 text-green-600 font-medium">
          <!-- Up Arrow Icon -->
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
            <path fill-rule="evenodd" d="M9.808 4.057a.75.75 0 0 1 .92-.527l3.116.849a.75.75 0 0 1 .528.915l-.823 3.121a.75.75 0 0 1-1.45-.382l.337-1.281a23.484 23.484 0 0 0-3.609 3.056.75.75 0 0 1-1.07.01L6 8.06l-3.72 3.72a.75.75 0 1 1-1.06-1.061l4.25-4.25a.75.75 0 0 1 1.06 0l1.756 1.755a25.015 25.015 0 0 1 3.508-2.85l-1.46-.398a.75.75 0 0 1-.526-.92Z" clip-rule="evenodd" />
          </svg>
          Stable
        </span>
      `;
    default:
      return `<span class="text-gray-500">${trend}</span>`;
  }
}

    function healthBar(value) {
      return `
        <div class="w-full bg-gray-200 rounded-full h-2">
          <div class="h-2 rounded-full ${value >= 75 ? 'bg-green-500' : value >= 60 ? 'bg-yellow-500' : 'bg-red-500'}" style="width: ${value}%;"></div>
        </div>
        <span class="text-xs text-gray-600 ml-1">${value}%</span>
      `;
    }


    function applyFilters() {
      let filtered = forecasts;
      const searchText = searchInput.value.toLowerCase();
      const priority = priorityFilter.value;
      const vehicle = vehicleFilter.value;

      if (searchText) filtered = filtered.filter(f => f.vehicle.toLowerCase().includes(searchText));
      if (priority) filtered = filtered.filter(f => f.priority === priority);
      if (vehicle) filtered = filtered.filter(f => f.vehicle === vehicle);

      renderTable(filtered);
    }

    searchInput.addEventListener("input", applyFilters);
    priorityFilter.addEventListener("change", applyFilters);
    vehicleFilter.addEventListener("change", applyFilters);

    // Initial render
    renderTable(forecasts);
  </script>

</body>
</html>
